/*
Project: angular-gantt v1.2.11 - Gantt chart component for AngularJS
Authors: Marco Schweighauser, RÃ©mi Alvergnat
License: MIT
Homepage: https://www.angular-gantt.com
Github: https://github.com/angular-gantt/angular-gantt.git
*/

!function(){"use strict";angular.module("gantt.contextmenus",["gantt"]).directive("ganttContextMenus",["$compile","$document",function(a,b){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",taskOptions:"=?",rowLabelOptions:"=?"},link:function(c,d,e,f){var g=f.gantt.api;void 0===c.enabled&&(c.enabled=!0),c.api=g,g.directives.on["new"](c,function(d,e,f){if("ganttRowLabel"===d&&void 0!==c.rowLabelOptions&&f.hasClass("gantt-row-label")&&f.hasClass("gantt-row-height")&&!f.hasClass("context-menu-enabled")){f.addClass("context-menu-enabled");var g=e.$new();g.directiveName=d,g.menuList=c.rowLabelOptions,g.pluginScope=c;var h=b[0].createElement("div");angular.element(h).attr("data-ng-if","pluginScope.enabled");var i=b[0].createElement("gantt-context-menu");angular.element(h).append(i),f.append(a(h)(g))}if("ganttTask"===d&&void 0!==c.taskOptions&&!f.hasClass("context-menu-enabled")){f.addClass("context-menu-enabled");var g=e.$new();g.pluginScope=c,g.directiveName=d,g.menuList=c.taskOptions;var h=b[0].createElement("div");angular.element(h).attr("data-ng-if","pluginScope.enabled");var i=b[0].createElement("gantt-context-menu");angular.element(h).append(i),f.append(a(h)(g))}})}}}])}(),function(){"use strict";angular.module("gantt.contextmenus").directive("ganttContextMenu",["$timeout",function(a){return{restrict:"EA",scope:!0,replace:!0,controller:["$scope","$element","ganttUtils","$q",function(a,b,c,d){var e=[],f=null,g=a.directiveName,h=null,i=a.menuList;"ganttTask"===g&&(h=a.task.model,a.task.getContentElement().bind("contextmenu",function(b){b.stopPropagation(),a.$apply(function(){if(b.preventDefault(),!(i instanceof Array))throw'"'+i+'" not an array';0!==i.length&&k(a,b,i,h)})})),"ganttRowLabel"===g&&(h=a.row.model,b.parent().parent(".context-menu-enabled").bind("contextmenu",function(b){b.stopPropagation(),a.$apply(function(){if(b.preventDefault(),!(i instanceof Array))throw'"'+i+'" not an array';0!==i.length&&k(a,b,i,h)})}));var j=function(a){for(;e.length&&(!a||e.length>a);)e.pop().remove();0===e.length&&f&&f.remove()},k=function(a,b,c,g,h){if(h||(h=0),!i)var i=angular.element;i(b.currentTarget).addClass("context");var l=i("<div>");f?l=f:f=l,l.addClass("dropdown clearfix");var m=i("<ul>");m.addClass("dropdown-menu"),m.attr({role:"menu"}),m.css({display:"block",position:"absolute",left:b.pageX+"px",top:b.pageY+"px","z-index":1e4}),angular.forEach(c,function(c,e){var f=i("<li>");if(null===c)f.addClass("divider");else{var l=angular.isArray(c[1])?c[1]:angular.isArray(c[2])?c[2]:angular.isArray(c[3])?c[3]:null,n=i("<a>");n.css("padding-right","8px"),n.attr({tabindex:"-1",href:"#"});var o="string"==typeof c[0]?c[0]:c[0].call(a,a,b,g);d.when(o).then(function(a){n.text(a),l&&(n.css("cursor","default"),n.append(i('<strong style="font-family:monospace;font-weight:bold;float:right;">&gt;</strong>')))}),f.append(n);var p=angular.isFunction(c[2])?c[2].call(a,a,b,g,o):!0;if(p){var q=function(c){j(h+1);var d={pageX:b.pageX+m[0].offsetWidth-1,pageY:m[0].offsetTop+f[0].offsetTop-3};k(a,d,l,g,h+1)};f.on("click",function(d){d.preventDefault(),a.$apply(function(){l?q(d):(i(b.currentTarget).removeClass("context"),j(),c[1].call(a,a,b,g,o))})}),f.on("mouseover",function(b){a.$apply(function(){l&&q(b)})})}else f.on("click",function(a){a.preventDefault()}),f.addClass("disabled")}m.append(f)}),l.append(m);var n=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);l.css({width:"100%",height:n+"px",position:"absolute",top:0,left:0,zIndex:9999}),i(document).find("body").append(l),l.on("mousedown",function(a){i(a.target).hasClass("dropdown")&&(i(b.currentTarget).removeClass("context"),j())}).on("contextmenu",function(a){i(a.currentTarget).removeClass("context"),a.preventDefault(),j(h)}),a.$on("$destroy",function(){j()}),e.push(m)};a.gantt.api.directives.raise["new"]("ganttContextMenu",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttContextMenu",a,b)})}]}}])}(),angular.module("gantt.contextmenus.templates",[]).run(["$templateCache",function(a){a.put("plugins/contextmenus/contextmenu.tmpl.html",'<div ng-cloak\n     class="gantt-task-info"\n     ng-show="displayed"\n     ng-class="isRightAligned ? \'gantt-task-infoArrowR\' : \'gantt-task-infoArrow\'"\n     ng-style="{top: taskRect.top + \'px\', marginTop: -elementHeight - 8 + \'px\'}">\n    <div class="gantt-task-info-content">\n        <div gantt-bind-compile-html="pluginScope.content"></div>\n    </div>\n</div>\n')}]);
//# sourceMappingURL=angular-gantt-contextmenus-plugin.min.js.map